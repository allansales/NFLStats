game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
# produce_voting_format = function(data){
#
# }
a = game_results %>% filter(Season == 2011)
View(a)
result = a[1,]
result
produce_voting_format = function(result){
raw = c(rep(c(`Home Team`,`Away Team`), `Home Score`),
rep(c(`Away Team`, `Home Team`), `Away Score`))
raw = matrix(raw, ncol = 2, byrow = TRUE) %>% as_data_frame()
}
produce_voting_format(result)
result
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`), result$`Away Score`))
raw = matrix(raw, ncol = 2, byrow = TRUE) %>% as_data_frame()
}
produce_voting_format(result)
b = produce_voting_format(result)
View(b)
b = a %>% do(produce_voting_format(.))
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`), result$`Away Score`))
raw = matrix(raw, ncol = 2, byrow = TRUE) %>% as_data_frame()
}
a = game_results %>% filter(Season == 2011)
b = a %>% rowwise() %>% do(produce_voting_format(.))
View(b)
View(a)
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`), result$`Away Score`))
raw = matrix(raw, ncol = 2, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))
voting_format = game_results %>% group_by(Season) %>% rowwise() %>% do(produce_voting_format(.))
View(voting_format)
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, results$Season), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, results$Season), result$`Away Score`))
raw = matrix(raw, ncol = 2, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% group_by(Season) %>% rowwise() %>% do(produce_voting_format(.))
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season), result$`Away Score`))
raw = matrix(raw, ncol = 2, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))
View(voting_format)
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season), result$`Away Score`))
raw = matrix(raw, ncol = 3, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))
View(voting_format)
View(game_results)
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season, result$Week), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season, result$Week), result$`Away Score`))
raw = matrix(raw, ncol = 3, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season, result$Week), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season, result$Week), result$`Away Score`))
raw = matrix(raw, ncol = 4, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))
View(voting_format)
sum(game_results$`Home Score`) + sum(game_results$`Away Score`)
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season, result$Week), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season, result$Week), result$`Away Score`))
raw = matrix(raw, ncol = 4, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))
View(voting_format)
teams = game_results$`Home Team` %>% distinct()
teams = game_results$`Home Team` %>% unique()
teams
vote <- create_vote(voting_format, xtype = 2, candidate = teams)
voting_format %>% Type
voting_format
View(voting_format)
voting_format %>% is.data.frame()
vote <- create_vote(voting_format, xtype = 2, candidate = teams)
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season, result$Week), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season, result$Week), result$`Away Score`))
raw = matrix(raw, ncol = 4, byrow = TRUE)
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season, result$Week), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season, result$Week), result$`Away Score`))
raw = matrix(raw, ncol = 4, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.)) %>% as.matrix()
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.)) %>% as.matrix()
voting_format %>% is.data.frame()
teams = game_results$`Home Team` %>% unique()
vote <- create_vote(voting_format, xtype = 2, candidate = teams)
View(voting_format)
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season, result$Week), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season, result$Week), result$`Away Score`))
raw = matrix(raw, ncol = 4, byrow = TRUE) %>% as_data_frame()
colnames(raw) = c("Home Team", "Away Team", "Season", "Week")
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.)) %>% as.matrix()
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))# %>% as.matrix()
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season, result$Week), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season, result$Week), result$`Away Score`))
raw = matrix(raw, ncol = 4, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.)) %>% as.matrix()
colnames(voting_format) = c("Home Team", "Away Team", "Season", "Week")
View(voting_format)
teams = game_results$`Home Team` %>% unique()
power_ranking_w17_s17 = voting_format %>% filter(Season == "2017", Week == "17")
power_ranking_w17_s17 = subset(voting_format, Season == "2017" & Week == "17")
power_ranking_w17_s17 = subset(voting_format, "Season" == "2017" & "Week" == "17")
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.))
colnames(voting_format) = c("Home Team", "Away Team", "Season", "Week")
teams = game_results$`Home Team` %>% unique()
power_ranking_w17_s17 = voting_format %>% filter(Season == "2017", Week == "17")
View(power_ranking_w17_s17)
w17_s17 = voting_format %>% filter(Season == "2017", Week == "17")
library(tidyverse)
library(votesys)
game_results = read_csv("nfl_game_results.csv")
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
get_season = function(date){
month = format(date, "%m") %>% as.integer()
year = format(date, "%Y") %>% as.integer()
if(month < 3){
return(year - 1)
}
return(year)
}
game_results = game_results %>% rowwise %>% mutate(Season = get_season(Date))
get_week = function(dates){
DAY_BEFORE = 1
dif_of_weeks = difftime(dates, min(dates)-DAY_BEFORE, units = "weeks") %>% as.integer()
week = dif_of_weeks + 1
}
game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
produce_voting_format = function(result){
raw = c(rep(c(result$`Home Team`,result$`Away Team`, result$Season, result$Week), result$`Home Score`),
rep(c(result$`Away Team`, result$`Home Team`, result$Season, result$Week), result$`Away Score`))
raw = matrix(raw, ncol = 4, byrow = TRUE) %>% as_data_frame()
}
voting_format = game_results %>% rowwise() %>% do(produce_voting_format(.)) #%>% as.matrix()
colnames(voting_format) = c("Home Team", "Away Team", "Season", "Week")
teams = game_results$`Home Team` %>% unique()
w17_s17 = voting_format %>% filter(Season == "2017", Week == "17")
vote <- create_vote(w17_s17 %>% as.matrix(), xtype = 2, candidate = teams)
y <- irv_method(vote)
y
s17 = voting_format %>% filter(Season == "2017")
vote <- create_vote(s17 %>% as.matrix(), xtype = 2, candidate = teams)
y <- irv_method(vote)
y
View(w17_s17)
View(w17_s17)
library(tidyverse)
library(votesys)
game_results = read_csv("nfl_game_results.csv")
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
get_season = function(date){
month = format(date, "%m") %>% as.integer()
year = format(date, "%Y") %>% as.integer()
if(month < 3){
return(year - 1)
}
return(year)
}
game_results = game_results %>% rowwise %>% mutate(Season = get_season(Date))
get_week = function(dates){
DAY_BEFORE = 1
dif_of_weeks = difftime(dates, min(dates)-DAY_BEFORE, units = "weeks") %>% as.integer()
week = dif_of_weeks + 1
}
game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv")
View(power_rankings)
View(power_rankings)
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv")
View(power_rankings)
View(power_rankings)
str(power_rankings)
str(game_results)
game_results$Week = game_results$Week %>% as.character()
str(game_results)
View(game_results)
game_results = read_csv("nfl_game_results.csv")
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
game_results$Week = game_results$Week %>% as.character()
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
game_results$Week = game_results$Week %>% as.character()
game_results$Week = game_results$Week %>% as_character()
game_results = read_csv("nfl_game_results.csv")
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
get_season = function(date){
month = format(date, "%m") %>% as.integer()
year = format(date, "%Y") %>% as.integer()
if(month < 3){
return(year - 1)
}
return(year)
}
game_results = game_results %>% rowwise %>% mutate(Season = get_season(Date))
get_week = function(dates){
DAY_BEFORE = 1
dif_of_weeks = difftime(dates, min(dates)-DAY_BEFORE, units = "weeks") %>% as.integer()
week = dif_of_weeks + 1
week %>% as.character()
}
game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
View(game_results)
get_week = function(dates){
DAY_BEFORE = 1
dif_of_weeks = difftime(dates, min(dates)-DAY_BEFORE, units = "weeks") %>% as.integer()
week = dif_of_weeks + 1
week
}
game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
View(game_results)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv")
str(game_results)
View(game_results)
View(power_rankings)
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week != "Presseason")
View(power_rankings)
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week != "Preseason")
View(power_rankings)
table(power_rankings$week)
View(power_rankings)
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
table(power_rankings$week)
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv")# %>% filter(week %in% 1:17)
power_rankings_ = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
table(power_rankings$week)
table(power_rankings_$week)
5440/320
View(power_rankings)
falcons_2012 = power_rankings_ %>% filter(team == "Atlanta Falcons", year == 2012)
View(falcons_2012)
falcons_2012 = power_rankings %>% filter(team == "Atlanta Falcons", year == 2012)
View(falcons_2012)
ravens_2014 = power_rankings %>% filter(team == "Baltimore Ravens", year == 2014)
falcons_2012 = power_rankings %>% filter(team == "Atlanta Falcons", year == 2012)
texans_2013 = power_rankings %>% filter(team == "Houston Texans", year == 2013)
ravens_2014 = power_rankings %>% filter(team == "Baltimore Ravens", year == 2014)
chiefs_2013 = power_rankings %>% filter(team == "Kansas City Chiefs", year == 2013)
View(ravens_2014)
View(texans_2013)
View(chiefs_2013)
giants_2011 = power_rankings %>% filter(team == "New York Giants", year == 2011)
View(giants_2011)
jaguars_2013 = power_rankings %>% filter(team == "Jacksonville Jaguars", year == 2013)
View(jaguars_2013)
power_rankings[team == "Kansas City Chiefs" & year == 2013,]
power_rankings["team" == "Kansas City Chiefs" & "year" == 2013,]
power_rankings["team" == "Kansas City Chiefs"]
power_rankings[power_rankings$team == "Kansas City Chiefs"]
power_rankings$team == "Kansas City Chiefs"
power_rankings[,power_rankings$team == "Kansas City Chiefs"]
power_rankings[power_rankings$team == "Kansas City Chiefs",]
power_rankings[power_rankings$team == "Kansas City Chiefs" & , power_rankings$year == 2013]
power_rankings[power_rankings$team == "Kansas City Chiefs" & power_rankings$year == 2013,]
power_rankings[power_rankings$team == "Kansas City Chiefs" & power_rankings$year == 2013 & week == 1,]
power_rankings[power_rankings$team == "Kansas City Chiefs" & power_rankings$year == 2013,]
power_rankings[power_rankings$team == "Kansas City Chiefs" & power_rankings$year == 2013 & power_rankings$week == 1,]
power_rankings[power_rankings$team == "Kansas City Chiefs" & power_rankings$year == 2013 & power_rankings$week == 1,]$record = "1-0"
chiefs_2013 = power_rankings %>% filter(team == "Kansas City Chiefs", year == 2013)
View(chiefs_2013)
team = "Kansas City Chiefs"
year = 2013
week = 1
new_record = "1-0"
refact_record = function(team, year, week, new_record){
row = power_rankings[power_rankings$team == team & power_rankings$year == year & power_rankings$week == week,]
row$record = new_record
}
library(tidyverse)
library(votesys)
game_results = read_csv("nfl_game_results.csv")
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
get_season = function(date){
month = format(date, "%m") %>% as.integer()
year = format(date, "%Y") %>% as.integer()
if(month < 3){
return(year - 1)
}
return(year)
}
game_results = game_results %>% rowwise %>% mutate(Season = get_season(Date))
get_week = function(dates){
DAY_BEFORE = 1
dif_of_weeks = difftime(dates, min(dates)-DAY_BEFORE, units = "weeks") %>% as.integer()
week = dif_of_weeks + 1
week
}
game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
power_rankings_ = read_csv("python_crawlers/crawlers/spiders/nfl.csv")
giants_2011 = power_rankings %>% filter(team == "New York Giants", year == 2011)
falcons_2012 = power_rankings %>% filter(team == "Atlanta Falcons", year == 2012)
texans_2013 = power_rankings %>% filter(team == "Houston Texans", year == 2013)
ravens_2014 = power_rankings %>% filter(team == "Baltimore Ravens", year == 2014)
chiefs_2013 = power_rankings %>% filter(team == "Kansas City Chiefs", year == 2013)
jaguars_2013 = power_rankings %>% filter(team == "Jacksonville Jaguars", year == 2013)
View(chiefs_2013)
library(tidyverse)
library(votesys)
game_results = read_csv("nfl_game_results.csv")
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
get_season = function(date){
month = format(date, "%m") %>% as.integer()
year = format(date, "%Y") %>% as.integer()
if(month < 3){
return(year - 1)
}
return(year)
}
game_results = game_results %>% rowwise %>% mutate(Season = get_season(Date))
get_week = function(dates){
DAY_BEFORE = 1
dif_of_weeks = difftime(dates, min(dates)-DAY_BEFORE, units = "weeks") %>% as.integer()
week = dif_of_weeks + 1
week
}
game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
power_rankings_ = read_csv("python_crawlers/crawlers/spiders/nfl.csv")
giants_2011 = power_rankings %>% filter(team == "New York Giants", year == 2011)
falcons_2012 = power_rankings %>% filter(team == "Atlanta Falcons", year == 2012)
texans_2013 = power_rankings %>% filter(team == "Houston Texans", year == 2013)
ravens_2014 = power_rankings %>% filter(team == "Baltimore Ravens", year == 2014)
chiefs_2013 = power_rankings %>% filter(team == "Kansas City Chiefs", year == 2013)
jaguars_2013 = power_rankings %>% filter(team == "Jacksonville Jaguars", year == 2013)
View(chiefs_2013)
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
power_rankings_ = read_csv("python_crawlers/crawlers/spiders/nfl.csv")
giants_2011 = power_rankings_ %>% filter(team == "New York Giants", year == 2011)
falcons_2012 = power_rankings_ %>% filter(team == "Atlanta Falcons", year == 2012)
texans_2013 = power_rankings_ %>% filter(team == "Houston Texans", year == 2013)
ravens_2014 = power_rankings_ %>% filter(team == "Baltimore Ravens", year == 2014)
chiefs_2013 = power_rankings_ %>% filter(team == "Kansas City Chiefs", year == 2013)
jaguars_2013 = power_rankings_ %>% filter(team == "Jacksonville Jaguars", year == 2013)
View(chiefs_2013)
View(ravens_2014)
bengals_2014 = power_rankings_ %>% filter(team == "Cincinati Bengals", year == 2014)
bengals_2014 = power_rankings_ %>% filter(team == "Cincinatti Bengals", year == 2014)
bengals_2014 = power_rankings_ %>% filter(team == "Cincinnati Bengals", year == 2014)
View(bengals_2014)
View(bengals_2014)
falcons_2012 = power_rankings_ %>% filter(team == "Atlanta Falcons", year == 2012)
View(falcons_2012)
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
power_rankings_ = read_csv("python_crawlers/crawlers/spiders/nfl.csv")
giants_2011 = power_rankings_ %>% filter(team == "New York Giants", year == 2011)
ravens_2014 = power_rankings_ %>% filter(team == "Baltimore Ravens", year == 2014)
bengals_2014 = power_rankings_ %>% filter(team == "Cincinnati Bengals", year == 2014)
chiefs_2013 = power_rankings_ %>% filter(team == "Kansas City Chiefs", year == 2013)
jaguars_2013 = power_rankings_ %>% filter(team == "Jacksonville Jaguars", year == 2013)
falcons_2012 = power_rankings_ %>% filter(team == "Atlanta Falcons", year == 2012)
falcons_2012 = power_rankings_ %>% filter(team == "Atlanta Falcons", year == 2012)
texans_2013 = power_rankings_ %>% filter(team == "Houston Texans", year == 2013)
View(giants_2011)
View(jaguars_2013)
View(ravens_2014)
View(texans_2013)
View(chiefs_2013)
View(falcons_2012)
View(power_rankings_)
library(tidyverse)
library(votesys)
game_results = read_csv("nfl_game_results.csv")
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
get_season = function(date){
month = format(date, "%m") %>% as.integer()
year = format(date, "%Y") %>% as.integer()
if(month < 3){
return(year - 1)
}
return(year)
}
game_results = game_results %>% rowwise %>% mutate(Season = get_season(Date))
get_week = function(dates){
DAY_BEFORE = 1
dif_of_weeks = difftime(dates, min(dates)-DAY_BEFORE, units = "weeks") %>% as.integer()
week = dif_of_weeks + 1
week
}
game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
power_rankings_ = read_csv("python_crawlers/crawlers/spiders/nfl.csv")
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
library(tidyverse)
library(votesys)
game_results = read_csv("nfl_game_results.csv")
game_results = game_results %>% select(Date, `Home Team`, `Away Team`, `Home Score`, `Away Score`)
get_season = function(date){
month = format(date, "%m") %>% as.integer()
year = format(date, "%Y") %>% as.integer()
if(month < 3){
return(year - 1)
}
return(year)
}
game_results = game_results %>% rowwise %>% mutate(Season = get_season(Date))
get_week = function(dates){
DAY_BEFORE = 1
dif_of_weeks = difftime(dates, min(dates)-DAY_BEFORE, units = "weeks") %>% as.integer()
week = dif_of_weeks + 1
week
}
game_results = game_results %>% group_by(Season) %>% mutate(Week = get_week(Date))
game_results$Day_of_week = weekdays(game_results$Date)
game_results$Type = with(game_results, if_else(Week <= 17, "Regular Season",
if_else(Week == 18, "Wild Card",
if_else(Week == 19, "Divisional",
if_else(Week == 20, "Conference",
"Super Bowl")))))
power_rankings = read_csv("python_crawlers/crawlers/spiders/nfl.csv") %>% filter(week %in% 1:17)
View(power_rankings)
View(game_results)
View(power_rankings)
View(game_results)
power_rankings$week = power_rankings$week %>% as.integer()
View(power_rankings)
View(power_rankings)
View(game_results)
View(game_results)
View(power_rankings)
View(game_results)
game_results_2 = game_results %>% select(Date, `Away Team`, `Home Team`, `Away Score`, `Home Score`, Season, Week, Day_of_week, Type)
View(game_results_2)
teams_results = rbind(game_results, game_results_2)
View(teams_results)
teams_results = rbind(game_results, game_results_2)
View(teams_results)
teams_results = rbind(game_results, game_results_2)
game_results_2 = game_results %>% select(Date, Team_1 = `Away Team`, Team_2 =`Home Team`, Team_1_score =`Away Score`, Team_2_score =`Home Score`, Season, Week, Day_of_week, Type)
teams_results = rbind(game_results, game_results_2)
View(teams_results)
teams_results = game_results %>% select(Date, Team_1 =`Home Team`, Team_2 = `Away Team`, Team_1_score =`Home Score`, Team_2_score =`Away Score`, Season, Week, Day_of_week, Type)
teams_results_2 = game_results %>% select(Date, Team_1 = `Away Team`, Team_2 =`Home Team`, Team_1_score =`Away Score`, Team_2_score =`Home Score`, Season, Week, Day_of_week, Type)
teams_results = rbind(teams_results, teams_results_2)
View(teams_results)
